{% load static tailwind_tags %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}AML System{% endblock %}</title>
  {% tailwind_css %}
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">

  <!-- Google Fonts: Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      font-size: 12px;
      margin: 0;
    }
  </style>
  {% block extra_head %}{% endblock %}
</head>

<body>
  <!-- Sidebar -->
  <nav class="fixed top-0 left-0 w-[250px] h-screen border-r border-gray-200 bg-[#171731] flex flex-col">
    <!-- Top Brand/Logo -->
    <div class="flex items-center px-3 py-3 border-b border-gray-200">
      <img src="{% static 'images/logo.jpg' %}" alt="AML Logo" class="rounded-full h-10 mr-2">
      <span class="font-bold text-white text-lg">AML System</span>
    </div>

    <!-- Scrollable Menu -->
    <div class="flex-grow overflow-auto">
      <!-- GENERAL SECTION -->
      <div class="px-4 mt-4 mb-2  text-xs font-bold text-white uppercase tracking-wider">
        General
      </div>
      <ul class="space-y-1">
        <li>
          <a href="{% url 'dashboard' %}" class="flex items-center px-4 py-2 text-white hover:bg-gray-100">
            <!-- Dashboard icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="mr-2 text-gray-600" viewBox="0 0 16 16">
              <path
                d="M8 4a.5.5 0 0 0-.5.5v2.688l-1.59 2.726a.5.5 0 1 0 .86.5l1.528-2.621A.5.5 0 0 0 8 7.5V4.5A.5.5 0 0 0 8 4z" />
              <path fill-rule="evenodd"
                d="M4.601 3.401a7 7 0 0 1 9.798 9.798.5.5 0 1 1-.791-.611 6 6 0 1 0-9.014 0 .5.5 0 1 1-.791.611 7 7 0 0 1 9.798-9.798z" />
            </svg>
            Dashboard
          </a>
        </li>

        <li>
          <a href="{% url 'list_alerts'%}" class="flex items-center px-4 py-2 text-white hover:bg-gray-100">
            <!-- Alerts icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="mr-2 text-gray-600" viewBox="0 0 16 16">
              <path d="M8 16a2 2 0 0 0 1.985-1.75H6.015A2 2 0 0 0 8 16Z" />
              <path
                d="M8 1a5.53 5.53 0 0 0-5.5 5.5c0 .7-.48 1.292-1.066 2.342C1.229 9.4 1 10.028 1 10.6a.5.5 0 0 0 .5.5H5a1 1 0 0 1 1 1v1h4v-1a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 .5-.5c0-.572-.229-1.2-.434-1.758C13.979 7.792 13.5 7.2 13.5 6.5A5.53 5.53 0 0 0 8 1Z" />
            </svg>
            <span>Alerts</span>
            {% if open_alert_count > 0 %}
            <!-- Badge for open alerts -->
            <span class="ml-2 inline-block bg-red-600 text-white text-xs font-semibold px-2 py-1 rounded-full">
              {{ open_alert_count }}
            </span>
            {% endif %}
          </a>
        </li>
        <li>
          <a href="{%url 'aml_report'%}" class="flex items-center px-4 py-2 text-white hover:bg-gray-100">
            <!-- Reports icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="mr-2 text-gray-600" viewBox="0 0 16 16">
              <path
                d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5ZM9.5 3a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 .354.854l-5.5 5.5a.5.5 0 0 1-.708 0l-3-3a.5.5 0 0 1 .708-.708l2.646 2.647 5.146-5.147H10a.5.5 0 0 1-.5-.5V3Z" />
            </svg>
            Reports
          </a>
        </li>
      </ul>

      <!-- AML TOOLS SECTION -->
      <div class="px-4 mt-4 mb-2 text-xs font-bold text-white uppercase tracking-wider">
        AML Tools
      </div>
      <ul class="space-y-1">
        <li class="relative">
          <a href="javascript:void(0);" id="dropdownKYC"
            class="flex items-center px-4 py-2 text-white hover:bg-gray-100">
            <!-- KYC icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="mr-2 text-gray-600" viewBox="0 0 16 16">
              <path
                d="M15.854 5.146a.5.5 0 1 0-.708.708l.647.646H13.5a.5.5 0 0 0 0 1h2.293l-.647.646a.5.5 0 1 0 .708.708l1.5-1.5a.5.5 0 0 0 0-.708l-1.5-1.5Z" />
              <path
                d="M1.5 8A2.5 2.5 0 0 1 4 5.5h4A2.5 2.5 0 0 1 10.5 8v5.5a.5.5 0 0 1-1 0V8A1.5 1.5 0 0 0 8 6.5H4A1.5 1.5 0 0 0 2.5 8v5.5a.5.5 0 0 1-1 0V8Z" />
              <path
                d="M4.75 2.5a2.75 2.75 0 0 1 5.5 0v2a2.75 2.75 0 0 1-5.5 0v-2Zm1 2a1.75 1.75 0 1 0 3.5 0v-2a1.75 1.75 0 1 0-3.5 0v2Z" />
            </svg>
            KYC (Know Your Customer)
            <!-- Dropdown arrow -->
            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2 w-4 h-4 fill-current text-gray-600" viewBox="0 0 20 20">
              <path
                d="M5.516 7.548L10 12.033l4.484-4.485a1 1 0 1 0 1.414 1.414l-5.192 5.192a1 1 0 0 1-1.414 0L4.102 8.962a1 1 0 1 0 1.414-1.414z" />
            </svg>
          </a>
          <!-- Dropdown Menu: hidden by default -->
          <ul id="dropdown-menu-kyc"
            class="absolute left-0 mt-1 hidden w-40 bg-white border border-gray-200 rounded-md shadow-lg z-10">
            <li>
              <a href="{% url 'register_kyc_profile' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                Register
              </a>


              
            </li>

            <li>
              <a href="{% url 'kyc_search' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                Search
              </a>
            </li>

            <li>
              <a href="{% url 'run_kyc_aml_screening' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                Batch screening
              </a>
            </li>

            <li>
              <a href="{% url 'check_individual' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                Individual Check
              </a>
            </li>

          </ul>
        </li>

<!-- KYC Section -->
<li>
  <div class="pt-2">
    <button type="button" class="flex items-center w-full p-2 text-gray-100 rounded-lg hover:bg-white/10" aria-controls="dropdown-kyc" data-collapse-toggle="dropdown-kyc">
      <svg class="w-5 h-5 text-gray-100" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
      <path d="M6 2c-1.10457 0-2 .89543-2 2v4c0 .55228.44772 1 1 1s1-.44772 1-1V4h12v7h-2c-.5523 0-1 .4477-1 1v2h-1c-.5523 0-1 .4477-1 1s.4477 1 1 1h5c.5523 0 1-.4477 1-1V3.85714C20 2.98529 19.3667 2 18.268 2H6Z"/>
      <path d="M6 11.5C6 9.567 7.567 8 9.5 8S13 9.567 13 11.5 11.433 15 9.5 15 6 13.433 6 11.5ZM4 20c0-2.2091 1.79086-4 4-4h3c2.2091 0 4 1.7909 4 4 0 1.1046-.8954 2-2 2H6c-1.10457 0-2-.8954-2-2Z"/>
    </svg>
      <span class="flex-1 ms-3 text-left rtl:text-right whitespace-nowrap">KYC Management</span>
      <svg class="w-3 h-3 transition-transform duration-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
    </svg>
    </svg>
    </button>
    <ul id="dropdown-kyc" class="hidden py-2 space-y-2">
      <li>
        <a href="{% url 'register_kyc_profile' %}" class="sidebar-item flex items-center w-full p-2 text-gray-100 rounded-lg pl-11">
          <svg class="w-4 h-4 text-gray-100 transition duration-75 group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
            <path d="M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"/>
          </svg>
          <span class="ms-3">Register</span>
        </a>
    </li>
    <li>
        <a href="{% url 'kyc_search' %}" class="sidebar-item flex items-center w-full p-2 text-gray-100 rounded-lg pl-11">
          <svg class="w-4 h-4 text-gray-100 transition duration-75 group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
            <path d="M10 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm0 14a6 6 0 1 1 0-12 6 6 0 0 1 0 12z"/>
            <path d="M21.707 21.707a1 1 0 0 1-1.414 0l-3.5-3.5a1 1 0 0 1 1.414-1.414l3.5 3.5a1 1 0 0 1 0 1.414z"/>
            </svg>
          <span class="ms-3">Search</span>
        </a>
    </li>
    <li>
        <a href="{% url 'kyc_aml_screening' %}" class="sidebar-item flex items-center w-full p-2 text-gray-100 rounded-lg pl-11">
          <svg class="w-4 h-4 text-gray-100 transition duration-75 group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
            <path d="M7.5 6.75V0h9v6.75h-9zm9 3.75V24h-9V10.5h9zM16.5 0h5.25v6.75h-5.25V0zm0 10.5h5.25v13.5h-5.25V10.5zM2.25 0h5.25v6.75H2.25V0zm0 10.5h5.25v13.5H2.25V10.5z"/>
            </svg>
          <span class="ms-3">Batch screening</span>
        </a>
    </li>
    <li>
        <a href="{% url 'run_aml_screening' %}" class="sidebar-item flex items-center w-full p-2 text-gray-100 rounded-lg pl-11">
          <svg class="w-4 h-4 text-gray-100 transition duration-75 group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm1-13h-2v6h6v-2h-4V7z"/>
            </svg>
          <span class="ms-3">Individual Check</span>
        </a>
    </li>
  </ul>
  </div>
</li>



        <li>
          <a href="{% url 'run_aml_screening' %}" class="flex items-center px-4 py-2 text-white hover:bg-gray-100">
            <!-- Investigations icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="mr-2 text-gray-600" viewBox="0 0 16 16">
              <path
                d="M11 6a5 5 0 1 1-1-3.995V3.95a4.008 4.008 0 0 0-1-.45 4 4 0 1 0 1.46 7.72l3.11 3.11a.5.5 0 0 0 .71-.71l-3.11-3.12A4.984 4.984 0 0 1 11 6Z" />
            </svg>
            Transactions Monitoring
          </a>
        </li>

        <li>
          <a href="{% url 'risk_definitions' %}" class="flex items-center px-4 py-2 text-white hover:bg-gray-100">
            <!-- Watchlists icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="mr-2 text-gray-600" viewBox="0 0 16 16">
              <path d="M13.5 6.5a.5.5 0 0 0-.5.5 5 5 0 1 1-5-5 .5.5 0 0 0 0-1 6 6 0 1 0 6 6 .5.5 0 0 0-.5-.5Z" />
              <path
                d="M10.354 10.354a.5.5 0 1 1-.708-.708L14.293 5l-4.647-4.646a.5.5 0 1 1 .708-.708l5 5a.5.5 0 0 1 0 .708l-5 5Z" />
            </svg>
            Risk Definations
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center px-4 py-2 text-white hover:bg-gray-100">
            <!-- data loading  -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="mr-2 text-gray-600" viewBox="0 0 16 16">
              <path
                d="M5.5 1a.5.5 0 0 1 .5.5v2.09c0 .21.132.398.331.47l6.66 2.49a.5.5 0 0 1 .009.93l-6.66 2.577a.5.5 0 0 0-.33.47v5.09a.5.5 0 0 1-1 0V1.5A.5.5 0 0 1 5.5 1Z" />
            </svg>
            data loading
          </a>
        </li>
      </ul>
    </div>

    <!-- Footer Links and Logged-in User Info -->
    <div class="px-4 py-4">

      <div class="px-4 mt-4 mb-2  text-xs font-bold text-gray-950 uppercase tracking-wider">
        <a href="#" class="flex justify-items-start px-4 py-2font-bold text-white hover:bg-gray-100">
          <!-- Settings icon -->
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="mr-2 text-gray-600"
            viewBox="0 0 16 16">
            <path
              d="M8 4a3.5 3.5 0 0 1 2.577 5.993l.734.732a.5.5 0 1 1-.708.708l-.732-.734A3.5 3.5 0 1 1 8 4Zm0 1a2.5 2.5 0 0 0-.5 4.95v1.05a.5.5 0 1 0 1 0v-1.05A2.5 2.5 0 0 0 8 5Z" />
            <path
              d="M16 8a2 2 0 0 1-1.259 1.863c-.02.928-.21 1.827-.55 2.635l1.06 1.06a.5.5 0 0 1-.708.708l-1.06-1.06a7.033 7.033 0 0 1-2.635.55A2 2 0 0 1 8 16a2 2 0 0 1-1.863-1.259c-.928-.02-1.827-.21-2.635-.55l-1.06 1.06a.5.5 0 0 1-.708-.708l1.06-1.06a7.033 7.033 0 0 1-.55-2.635A2 2 0 0 1 0 8c.02-.928.21-1.827.55-2.635l-1.06-1.06a.5.5 0 0 1 .708-.708l1.06 1.06c.808-.34 1.707-.53 2.635-.55A2 2 0 0 1 8 0c.928.02 1.827.21 2.635.55l1.06-1.06a.5.5 0 1 1 .708.708l-1.06 1.06c.34.808.53 1.707.55 2.635A2 2 0 0 1 16 8Z" />
          </svg>
          SETTINGS
        </a>

      </div>
      <ul class="space-y-1">

        <li>
          <a href="{% url 'aml-settings' %}" class="flex items-center px-4 py-2 text-white hover:bg-gray-100">
            <!-- Configurations icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="mr-2 text-gray-600" viewBox="0 0 16 16">
              <path
                d="M2.5 2A1.5 1.5 0 0 0 1 3.5v9a1.5 1.5 0 0 0 1.5 1.5h9.25a1.5 1.5 0 0 0 1.5-1.5v-5.11a1.5 1.5 0 0 0-.44-1.06l-3.14-3.14A1.5 1.5 0 0 0 8.69 3H2.5ZM2 3.5a.5.5 0 0 1 .5-.5H8v2a1 1 0 0 0 1 1h2v6a.5.5 0 0 1-.5.5H2.5a.5.5 0 0 1-.5-.5v-9Z" />
            </svg>
            AML Configurations
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center px-4 py-2 text-white hover:bg-gray-100">
            <!-- Users icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="mr-2 text-gray-600" viewBox="0 0 16 16">
              <path
                d="M3.5 0A.5.5 0 0 0 3 .5v1A.5.5 0 0 0 3.5 2H12a1 1 0 0 1 1 1v3a.5.5 0 0 0 1 0V3a2 2 0 0 0-2-2H3.5Z" />
              <path
                d="M0 .5A.5.5 0 0 1 .5 0h2a.5.5 0 0 1 0 1H1v13h13v-1.5a.5.5 0 0 1 1 0V14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V.5Z" />
              <path
                d="M9.5 8a.5.5 0 0 1 .5-.5h4.293l-2.147-2.146a.5.5 0 0 1 .708-.708l3 3a.498.498 0 0 1 .146.35v.007c0 .09-.02.18-.058.257a.498.498 0 0 1-.088.11l-3 3a.5.5 0 0 1-.708-.708L14.293 8.5H10a.5.5 0 0 1-.5-.5Z" />
            </svg>
            Users
          </a>
        </li>
      </ul>
      <div class="px-4 py-4 border-t border-gray-200">
        {% if user.is_authenticated %}
        <div class="flex items-center">
          {% if user.profile.avatar %}
          <img src="{% static 'images/avater.jpg' %}" alt="User Avatar" class="w-10 h-10 rounded-full mr-3">
          {% else %}
          <img src="{% static 'images/avater.jpg' %}" alt="" class="w-10 h-10 rounded-full mr-3">
          {% endif %}
          <div class="leading-tight">
            <div class="font-bold">{{ user.get_full_name|default:user.username }}</div>
            <div class="text-xs text-white">Logged in</div>
          </div>
        </div>
        <!-- Logout Form using POST -->
        <form method="post" action="{% url 'logout' %}" class="mt-2">
          {% csrf_token %}
          <button type="submit"
            class="w-full text-left px-4 py-2 font-bold text-white bg-[#f68430] rounded-lg hover:bg-gray-500">
            Logout
          </button>
        </form>
        {% else %}
        <a href="{% url 'login' %}" class="block px-4 py-2 font-bold text-white hover:bg-gray-100">
          Login
        </a>
        {% endif %}
      </div>
    </div>
  </nav>


  <script>
    document.getElementById("dropdownKYC").addEventListener("click", function (e) {
      e.preventDefault();
      var menu = document.getElementById("dropdown-menu-kyc");
      menu.classList.toggle("hidden");
    });
  </script>

<script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>


  <!-- Main Content Area -->
  <div class="ml-[250px] p-4">
    {% block content %}{% endblock %}
  </div>

  {% block extra_js %}{% endblock %}
</body>

</html>